from library import *

# fmt: off
# 打表，计算方法见 solve_lights_out_gauss
solutions = {
  1: (  # 步数=1
     (0,),
  ),
  2: (  # 步数=4
     (0, 1),
     (0, 1),
  ),
  3: (  # 步数=5
     (0, 2),
     (1,),
     (0, 2),
  ),
  4: (  # 步数=10
     (0, 1, 2, 3),
     (0, 3),
     (0, 1, 2, 3),
  ),
  5: (  # 步数=15
     (1, 2, 4),
     (1, 2, 3),
     (2, 3, 4),
     (0, 1, 3, 4),
     (0, 1),
  ),
  6: (  # 步数=28
     (0, 2, 3, 5),
     (1, 2, 3, 4),
     (0, 1, 2, 3, 4, 5),
     (0, 1, 2, 3, 4, 5),
     (1, 2, 3, 4),
     (0, 2, 3, 5),
  ),
  7: (  # 步数=33
     (0, 1, 3, 5, 6),
     (0, 1, 2, 4, 5, 6),
     (1, 2, 4, 5),
     (0, 3, 6),
     (1, 2, 4, 5),
     (0, 1, 2, 4, 5, 6),
     (0, 1, 3, 5, 6),
  ),
  8: (  # 步数=40
     (0, 1, 6, 7),
     (0, 1, 3, 4, 6, 7),
     (2, 3, 4, 5),
     (1, 2, 3, 4, 5, 6),
     (1, 2, 3, 4, 5, 6),
     (2, 3, 4, 5),
     (0, 1, 3, 4, 6, 7),
     (0, 1, 6, 7),
  ),
  9: (  # 步数=39
     (1, 3, 5, 7),
     (2, 4, 6),
     (0, 1, 7, 8),
     (0, 1, 2, 3, 5, 6, 7, 8),
     (1, 3, 4, 5, 7),
     (0, 1, 7, 8),
     (0, 8),
     (0, 1, 2, 3, 4, 5, 6, 7, 8),
  ),
  10: (  # 步数=44
     (0, 2, 7, 9),
     (1, 4, 5, 8),
     (0, 2, 4, 5, 7, 9),
     (3, 6),
     (1, 2, 4, 5, 7, 8),
     (1, 2, 4, 5, 7, 8),
     (3, 6),
     (0, 2, 4, 5, 7, 9),
     (1, 4, 5, 8),
     (0, 2, 7, 9),
  ),
  11: (  # 步数=63
     (0, 2, 3, 4, 5, 7, 8),
     (1, 2, 5, 6, 7, 8, 10),
     (0, 1, 3, 4, 7, 9),
     (0, 3, 4, 5, 6, 7, 10),
     (0, 1, 4, 9),
     (1, 3, 4, 5, 10),
     (0, 1, 2, 3, 4, 5, 7, 8, 9),
     (0, 1, 3, 4, 6, 7, 9, 10),
     (6, 10),
     (2, 6, 7, 8, 9, 10),
     (0, 4),
  ),
  12: (  # 步数=72
     (0, 2, 9, 11),
     (1, 4, 5, 6, 7, 10),
     (0, 2, 4, 7, 9, 11),
     (3, 4, 5, 6, 7, 8),
     (1, 2, 3, 4, 7, 8, 9, 10),
     (1, 3, 5, 6, 8, 10),
     (1, 3, 5, 6, 8, 10),
     (1, 2, 3, 4, 7, 8, 9, 10),
     (3, 4, 5, 6, 7, 8),
     (0, 2, 4, 7, 9, 11),
     (1, 4, 5, 6, 7, 10),
     (0, 2, 9, 11),
  ),
  13: (  # 步数=105
     (0, 1, 3, 5, 6, 7, 9, 11, 12),
     (0, 1, 2, 4, 5, 7, 8, 10, 11, 12),
     (1, 2, 4, 8, 10, 11),
     (0, 3, 4, 5, 6, 7, 8, 9, 12),
     (1, 2, 3, 4, 8, 9, 10, 11),
     (0, 1, 3, 5, 7, 9, 11, 12),
     (0, 3, 6, 9, 12),
     (0, 1, 3, 5, 7, 9, 11, 12),
     (1, 2, 3, 4, 8, 9, 10, 11),
     (0, 3, 4, 5, 6, 7, 8, 9, 12),
     (1, 2, 4, 8, 10, 11),
     (0, 1, 2, 4, 5, 7, 8, 10, 11, 12),
     (0, 1, 3, 5, 6, 7, 9, 11, 12),
  ),
  14: (  # 步数=70
     (0, 3, 8),
     (5, 6, 10, 11, 12, 13),
     (1, 2, 5, 6, 10, 13),
     (1, 2, 8, 10, 11, 12, 13),
     (4, 9),
     (0, 6, 7, 8, 10),
     (2, 3, 6, 8, 12, 13),
     (2, 3, 6, 8, 12, 13),
     (0, 6, 7, 8, 10),
     (4, 9),
     (1, 2, 8, 10, 11, 12, 13),
     (1, 2, 5, 6, 10, 13),
     (5, 6, 10, 11, 12, 13),
     (0, 3, 8),
  ),
  15: (  # 步数=117
     (0, 2, 3, 6, 8, 11, 12, 14),
     (1, 2, 3, 7, 11, 12, 13),
     (0, 1, 2, 5, 6, 8, 9, 12, 13, 14),
     (0, 1, 3, 5, 6, 8, 9, 11, 13, 14),
     (4, 7, 10),
     (2, 3, 5, 6, 8, 9, 11, 12),
     (0, 2, 3, 5, 6, 8, 9, 11, 12, 14),
     (1, 4, 7, 10, 13),
     (0, 2, 3, 5, 6, 8, 9, 11, 12, 14),
     (2, 3, 5, 6, 8, 9, 11, 12),
     (4, 7, 10),
     (0, 1, 3, 5, 6, 8, 9, 11, 13, 14),
     (0, 1, 2, 5, 6, 8, 9, 12, 13, 14),
     (1, 2, 3, 7, 11, 12, 13),
     (0, 2, 3, 6, 8, 11, 12, 14),
  ),
  16: (  # 步数=120
     (8, 10, 13, 14),
     (0, 1, 2, 3, 4, 5, 6, 9, 13, 14),
     (0, 6, 8, 10, 11),
     (0, 1, 5, 6, 7, 10, 11, 15),
     (1, 3, 5, 6, 7, 8, 13),
     (0, 1, 2, 4, 6, 7, 8),
     (0, 1, 2, 7, 10, 11, 12, 14, 15),
     (1, 5, 6, 7, 8, 10, 12, 13, 14, 15),
     (0, 1, 2, 3, 5, 7, 8, 9, 10, 14),
     (0, 1, 3, 4, 5, 8, 13, 14, 15),
     (7, 8, 9, 11, 13, 14, 15),
     (2, 7, 8, 9, 10, 12, 14),
     (0, 4, 5, 8, 9, 10, 14, 15),
     (4, 5, 7, 9, 15),
     (1, 2, 6, 9, 10, 11, 12, 13, 14, 15),
     (1, 2, 5, 7),
  ),
  17: (  # 步数=147
     (1, 2, 4, 8, 9, 10, 13, 14, 16),
     (1, 2, 3, 6, 8, 10, 13, 14, 15),
     (2, 3, 4, 7, 8, 10, 14, 15, 16),
     (0, 1, 3, 4, 6, 7, 9, 10, 12, 13, 15, 16),
     (0, 1, 5, 6, 9, 11, 12, 13),
     (4, 5, 7, 9, 11, 12),
     (2, 4, 8, 9, 10, 13, 14, 15, 16),
     (0, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 16),
     (2, 3, 4, 8, 9, 10, 14, 15, 16),
     (2, 3, 5, 7, 9, 11, 13, 14),
     (0, 6, 9, 12, 13, 15),
     (4, 5, 7, 9, 11, 12),
     (1, 2, 4, 5, 8, 9, 10, 11, 13, 14, 16),
     (1, 2, 3, 7, 8, 9, 13, 14, 15),
     (2, 3, 4, 7, 8, 10, 14, 15, 16),
     (0, 1, 3, 4, 12, 13, 15, 16),
     (0, 1, 6, 9, 12, 13),
  ),
  18: (  # 步数=188
     (0, 1, 3, 5, 6, 7, 10, 11, 12, 14, 16, 17),
     (0, 1, 2, 4, 5, 7, 10, 12, 13, 15, 16, 17),
     (1, 2, 4, 7, 10, 13, 15, 16),
     (0, 3, 4, 5, 7, 10, 12, 13, 14, 17),
     (1, 2, 3, 4, 5, 6, 7, 10, 11, 12, 13, 14, 15, 16),
     (0, 1, 3, 4, 5, 12, 13, 14, 16, 17),
     (0, 4, 6, 8, 9, 11, 13, 17),
     (0, 1, 2, 3, 4, 7, 8, 9, 10, 13, 14, 15, 16, 17),
     (6, 7, 8, 9, 10, 11),
     (6, 7, 8, 9, 10, 11),
     (0, 1, 2, 3, 4, 7, 8, 9, 10, 13, 14, 15, 16, 17),
     (0, 4, 6, 8, 9, 11, 13, 17),
     (0, 1, 3, 4, 5, 12, 13, 14, 16, 17),
     (1, 2, 3, 4, 5, 6, 7, 10, 11, 12, 13, 14, 15, 16),
     (0, 3, 4, 5, 7, 10, 12, 13, 14, 17),
     (1, 2, 4, 7, 10, 13, 15, 16),
     (0, 1, 2, 4, 5, 7, 10, 12, 13, 15, 16, 17),
     (0, 1, 3, 5, 6, 7, 10, 11, 12, 14, 16, 17),
  ),
  19: (  # 步数=169
     (1, 3, 5, 7, 11, 13, 15),
     (2, 4, 6, 9, 12, 14, 17, 18),
     (0, 1, 7, 11, 15, 17, 18),
     (0, 1, 2, 3, 5, 6, 12, 13, 14, 16),
     (1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 17),
     (0, 1, 5, 6, 14, 16),
     (0, 4, 7, 14, 15, 17, 18),
     (0, 1, 2, 5, 6, 9, 10, 11, 12, 15, 17, 18),
     (2, 4, 5, 6, 7, 9, 12, 14, 15, 16),
     (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17),
     (1, 2, 4, 5, 6, 7, 9, 12, 14, 15, 16, 17),
     (5, 6, 9, 10, 11, 12, 15, 16),
     (0, 3, 4, 7, 14, 17, 18),
     (3, 4, 5, 6, 15, 16, 17, 18),
     (1, 4, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17),
     (3, 4, 17, 18),
     (0, 3, 18),
     (3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18),
     (1,),
  ),
  20: (  # 步数=224
     (0, 2, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 17, 19),
     (1, 5, 14, 18),
     (0, 2, 3, 5, 6, 13, 14, 16, 17, 19),
     (2, 3, 4, 6, 8, 9, 10, 11, 13, 15, 16, 17),
     (3, 4, 6, 7, 8, 11, 12, 13, 15, 16),
     (0, 1, 2, 5, 9, 10, 14, 17, 18, 19),
     (0, 2, 3, 4, 6, 8, 9, 10, 11, 13, 15, 16, 17, 19),
     (0, 4, 7, 8, 9, 10, 11, 12, 15, 19),
     (0, 3, 4, 6, 7, 8, 9, 10, 11, 12, 13, 15, 16, 19),
     (0, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 16, 19),
     (0, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 16, 19),
     (0, 3, 4, 6, 7, 8, 9, 10, 11, 12, 13, 15, 16, 19),
     (0, 4, 7, 8, 9, 10, 11, 12, 15, 19),
     (0, 2, 3, 4, 6, 8, 9, 10, 11, 13, 15, 16, 17, 19),
     (0, 1, 2, 5, 9, 10, 14, 17, 18, 19),
     (3, 4, 6, 7, 8, 11, 12, 13, 15, 16),
     (2, 3, 4, 6, 8, 9, 10, 11, 13, 15, 16, 17),
     (0, 2, 3, 5, 6, 13, 14, 16, 17, 19),
     (1, 5, 14, 18),
     (0, 2, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 17, 19),
  ),
  21: (  # 步数=245
     (0, 2, 5, 6, 7, 8, 12, 13, 14, 15, 18, 20),
     (1, 5, 8, 10, 12, 15, 19),
     (0, 2, 3, 5, 6, 7, 8, 9, 11, 12, 13, 14, 15, 17, 18, 20),
     (2, 3, 4, 8, 9, 11, 12, 16, 17, 18),
     (3, 4, 5, 7, 10, 13, 15, 16, 17),
     (0, 1, 2, 4, 5, 6, 8, 9, 11, 12, 14, 15, 16, 18, 19, 20),
     (0, 2, 5, 6, 8, 9, 11, 12, 14, 15, 18, 20),
     (0, 2, 4, 7, 10, 13, 16, 18, 20),
     (0, 1, 2, 3, 5, 6, 8, 9, 11, 12, 14, 15, 17, 18, 19, 20),
     (2, 3, 5, 6, 8, 9, 11, 12, 14, 15, 17, 18),
     (1, 4, 7, 10, 13, 16, 19),
     (2, 3, 5, 6, 8, 9, 11, 12, 14, 15, 17, 18),
     (0, 1, 2, 3, 5, 6, 8, 9, 11, 12, 14, 15, 17, 18, 19, 20),
     (0, 2, 4, 7, 10, 13, 16, 18, 20),
     (0, 2, 5, 6, 8, 9, 11, 12, 14, 15, 18, 20),
     (0, 1, 2, 4, 5, 6, 8, 9, 11, 12, 14, 15, 16, 18, 19, 20),
     (3, 4, 5, 7, 10, 13, 15, 16, 17),
     (2, 3, 4, 8, 9, 11, 12, 16, 17, 18),
     (0, 2, 3, 5, 6, 7, 8, 9, 11, 12, 13, 14, 15, 17, 18, 20),
     (1, 5, 8, 10, 12, 15, 19),
     (0, 2, 5, 6, 7, 8, 12, 13, 14, 15, 18, 20),
  ),
  22: (  # 步数=276
     (0, 1, 5, 7, 8, 13, 14, 16, 20, 21),
     (0, 1, 3, 6, 7, 8, 10, 11, 13, 14, 15, 18, 20, 21),
     (2, 5, 6, 7, 9, 10, 11, 12, 14, 15, 16, 19),
     (1, 3, 5, 6, 9, 10, 11, 12, 15, 16, 18, 20),
     (4, 7, 10, 11, 14, 17),
     (0, 2, 3, 5, 6, 9, 12, 15, 16, 18, 19, 21),
     (1, 2, 3, 5, 6, 7, 10, 11, 14, 15, 16, 18, 19, 20),
     (0, 1, 2, 4, 6, 7, 9, 10, 11, 12, 14, 15, 17, 19, 20, 21),
     (0, 1, 8, 9, 10, 11, 12, 13, 20, 21),
     (2, 3, 5, 7, 8, 9, 10, 11, 12, 13, 14, 16, 18, 19),
     (1, 2, 3, 4, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 20),
     (1, 2, 3, 4, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 17, 18, 19, 20),
     (2, 3, 5, 7, 8, 9, 10, 11, 12, 13, 14, 16, 18, 19),
     (0, 1, 8, 9, 10, 11, 12, 13, 20, 21),
     (0, 1, 2, 4, 6, 7, 9, 10, 11, 12, 14, 15, 17, 19, 20, 21),
     (1, 2, 3, 5, 6, 7, 10, 11, 14, 15, 16, 18, 19, 20),
     (0, 2, 3, 5, 6, 9, 12, 15, 16, 18, 19, 21),
     (4, 7, 10, 11, 14, 17),
     (1, 3, 5, 6, 9, 10, 11, 12, 15, 16, 18, 20),
     (2, 5, 6, 7, 9, 10, 11, 12, 14, 15, 16, 19),
     (0, 1, 3, 6, 7, 8, 10, 11, 13, 14, 15, 18, 20, 21),
     (0, 1, 5, 7, 8, 13, 14, 16, 20, 21),
  ),
  23: (  # 步数=263
     (1, 4, 5, 7, 8, 9, 10, 11, 12, 13, 14, 16, 17, 18, 19, 20, 21, 22),
     (4, 5, 6, 7, 14, 15, 16, 22),
     (0, 2, 5, 8, 13, 17, 21, 22),
     (1, 4, 5, 6, 7, 10, 11, 14, 16, 19, 21),
     (0, 2, 4, 5, 7, 8, 10, 11, 13, 15, 17, 20, 21, 22),
     (3, 8, 9, 12, 19, 20, 21, 22),
     (1, 2, 4, 6, 7, 9, 10, 11, 13, 14, 16, 19, 20, 21),
     (1, 2, 5, 6, 7, 11, 13, 14, 15, 20, 22),
     (4, 5, 6, 10, 11, 12, 14, 15, 16, 17, 18, 19, 20),
     (0, 4, 5, 7, 8, 10, 11, 12, 15),
     (2, 7, 8, 9, 11, 14, 15, 16, 21, 22),
     (8, 9, 11, 12, 14, 15, 16, 18, 19, 21, 22),
     (0, 1, 3, 4, 5, 6, 7, 10, 12, 13, 15, 17, 18, 19, 20),
     (0, 1, 2, 3, 7, 8, 9, 13, 15, 17, 18, 19, 20, 21),
     (1, 4, 6, 9, 10, 11, 12, 13, 14, 15, 16, 18, 19, 20, 21),
     (0, 1, 2, 3, 5, 7, 8, 13, 15, 16, 19, 20),
     (0, 1, 3, 7, 8, 9, 12, 13, 18, 21, 22),
     (3, 8, 9, 12, 19, 20, 21, 22),
     (3, 5, 6, 7, 12, 13, 14, 15, 16, 17, 18, 19, 21),
     (0, 1, 3, 4, 5, 7, 8, 10, 21, 22),
     (0, 1, 2, 8, 9, 22),
     (1, 2, 3, 6, 7, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22),
     (0, 2, 3, 6, 7),
  ),
  24: (  # 步数=306
     (0, 3, 5, 6, 7, 9, 11, 12, 13, 14, 15, 16, 17),
     (4, 5, 7, 8, 10, 11, 17, 19, 20, 21, 22, 23),
     (1, 2, 3, 4, 8, 10, 12, 16, 17, 18, 19, 23),
     (1, 5, 6, 7, 8, 9, 10, 14, 16, 17, 20, 22, 23),
     (1, 2, 4, 5, 8, 15, 18, 19, 21, 22),
     (2, 3, 4, 6, 7, 8, 9, 11, 12, 13, 14, 16, 17, 18, 19, 21, 23),
     (0, 1, 6, 8, 9, 10, 11, 14, 16, 18, 20, 21),
     (0, 1, 2, 6, 9, 12, 13, 14, 15, 16, 18, 20),
     (1, 2, 4, 6, 8, 9, 10, 11, 12, 14, 17, 18, 19, 20, 21, 22, 23),
     (0, 3, 5, 6, 7, 8, 9, 14, 15, 16, 17, 18, 20, 23),
     (1, 2, 5, 6, 8, 10, 17, 20, 21, 22, 23),
     (0, 1, 2, 3, 8, 12, 13, 16, 17, 18),
     (0, 1, 2, 3, 8, 12, 13, 16, 17, 18),
     (1, 2, 5, 6, 8, 10, 17, 20, 21, 22, 23),
     (0, 3, 5, 6, 7, 8, 9, 14, 15, 16, 17, 18, 20, 23),
     (1, 2, 4, 6, 8, 9, 10, 11, 12, 14, 17, 18, 19, 20, 21, 22, 23),
     (0, 1, 2, 6, 9, 12, 13, 14, 15, 16, 18, 20),
     (0, 1, 6, 8, 9, 10, 11, 14, 16, 18, 20, 21),
     (2, 3, 4, 6, 7, 8, 9, 11, 12, 13, 14, 16, 17, 18, 19, 21, 23),
     (1, 2, 4, 5, 8, 15, 18, 19, 21, 22),
     (1, 5, 6, 7, 8, 9, 10, 14, 16, 17, 20, 22, 23),
     (1, 2, 3, 4, 8, 10, 12, 16, 17, 18, 19, 23),
     (4, 5, 7, 8, 10, 11, 17, 19, 20, 21, 22, 23),
     (0, 3, 5, 6, 7, 9, 11, 12, 13, 14, 15, 16, 17),
  ),
  25: (  # 步数=353
     (0, 1, 3, 5, 6, 9, 12, 15, 18, 19, 21, 23, 24),
     (0, 1, 2, 4, 5, 6, 18, 19, 20, 22, 23, 24),
     (1, 2, 4, 5, 8, 10, 11, 13, 14, 16, 19, 20, 22, 23),
     (0, 3, 6, 9, 10, 11, 12, 13, 14, 15, 18, 21, 24),
     (1, 2, 4, 5, 8, 9, 10, 11, 13, 14, 15, 16, 19, 20, 22, 23),
     (0, 1, 2, 4, 5, 6, 8, 9, 10, 14, 15, 16, 18, 19, 20, 22, 23, 24),
     (0, 1, 3, 5, 6, 7, 9, 11, 12, 13, 15, 17, 18, 19, 21, 23, 24),
     (6, 7, 9, 11, 13, 15, 17, 18),
     (2, 4, 5, 8, 9, 10, 11, 13, 14, 15, 16, 19, 20, 22),
     (0, 3, 4, 5, 6, 7, 8, 9, 12, 15, 16, 17, 18, 19, 20, 21, 24),
     (2, 3, 4, 5, 8, 10, 11, 13, 14, 16, 19, 20, 21, 22),
     (2, 3, 4, 6, 7, 8, 10, 11, 13, 14, 16, 17, 18, 20, 21, 22),
     (0, 3, 6, 9, 12, 15, 18, 21, 24),
     (2, 3, 4, 6, 7, 8, 10, 11, 13, 14, 16, 17, 18, 20, 21, 22),
     (2, 3, 4, 5, 8, 10, 11, 13, 14, 16, 19, 20, 21, 22),
     (0, 3, 4, 5, 6, 7, 8, 9, 12, 15, 16, 17, 18, 19, 20, 21, 24),
     (2, 4, 5, 8, 9, 10, 11, 13, 14, 15, 16, 19, 20, 22),
     (6, 7, 9, 11, 13, 15, 17, 18),
     (0, 1, 3, 5, 6, 7, 9, 11, 12, 13, 15, 17, 18, 19, 21, 23, 24),
     (0, 1, 2, 4, 5, 6, 8, 9, 10, 14, 15, 16, 18, 19, 20, 22, 23, 24),
     (1, 2, 4, 5, 8, 9, 10, 11, 13, 14, 15, 16, 19, 20, 22, 23),
     (0, 3, 6, 9, 10, 11, 12, 13, 14, 15, 18, 21, 24),
     (1, 2, 4, 5, 8, 10, 11, 13, 14, 16, 19, 20, 22, 23),
     (0, 1, 2, 4, 5, 6, 18, 19, 20, 22, 23, 24),
     (0, 1, 3, 5, 6, 9, 12, 15, 18, 19, 21, 23, 24),
  ),
  26: (  # 步数=356
     (0, 2, 5, 6, 8, 11, 12, 13, 14, 17, 19, 20, 23, 25),
     (1, 5, 6, 7, 11, 14, 18, 19, 20, 24),
     (0, 2, 3, 6, 7, 8, 9, 11, 12, 13, 14, 16, 17, 18, 19, 22, 23, 25),
     (2, 3, 5, 7, 9, 10, 15, 16, 18, 20, 22, 23),
     (4, 7, 10, 11, 14, 15, 18, 21),
     (0, 1, 3, 5, 7, 9, 11, 14, 16, 18, 20, 22, 24, 25),
     (0, 1, 2, 6, 7, 8, 11, 14, 17, 18, 19, 23, 24, 25),
     (1, 2, 3, 4, 5, 6, 7, 8, 9, 11, 14, 16, 17, 18, 19, 20, 21, 22, 23, 24),
     (0, 2, 6, 7, 8, 9, 10, 11, 14, 15, 16, 17, 18, 19, 23, 25),
     (2, 3, 5, 7, 8, 9, 16, 17, 18, 20, 22, 23),
     (3, 4, 8, 10, 12, 13, 15, 17, 21, 22),
     (0, 1, 2, 4, 5, 6, 7, 8, 11, 12, 13, 14, 17, 18, 19, 20, 21, 23, 24, 25),
     (0, 2, 10, 11, 12, 13, 14, 15, 23, 25),
     (0, 2, 10, 11, 12, 13, 14, 15, 23, 25),
     (0, 1, 2, 4, 5, 6, 7, 8, 11, 12, 13, 14, 17, 18, 19, 20, 21, 23, 24, 25),
     (3, 4, 8, 10, 12, 13, 15, 17, 21, 22),
     (2, 3, 5, 7, 8, 9, 16, 17, 18, 20, 22, 23),
     (0, 2, 6, 7, 8, 9, 10, 11, 14, 15, 16, 17, 18, 19, 23, 25),
     (1, 2, 3, 4, 5, 6, 7, 8, 9, 11, 14, 16, 17, 18, 19, 20, 21, 22, 23, 24),
     (0, 1, 2, 6, 7, 8, 11, 14, 17, 18, 19, 23, 24, 25),
     (0, 1, 3, 5, 7, 9, 11, 14, 16, 18, 20, 22, 24, 25),
     (4, 7, 10, 11, 14, 15, 18, 21),
     (2, 3, 5, 7, 9, 10, 15, 16, 18, 20, 22, 23),
     (0, 2, 3, 6, 7, 8, 9, 11, 12, 13, 14, 16, 17, 18, 19, 22, 23, 25),
     (1, 5, 6, 7, 11, 14, 18, 19, 20, 24),
     (0, 2, 5, 6, 8, 11, 12, 13, 14, 17, 19, 20, 23, 25),
  ),
  27: (  # 步数=405
     (0, 2, 3, 6, 8, 11, 12, 14, 15, 18, 20, 23, 24, 26),
     (1, 2, 3, 7, 11, 12, 13, 14, 15, 19, 23, 24, 25),
     (0, 1, 2, 5, 6, 8, 9, 12, 14, 17, 18, 20, 21, 24, 25, 26),
     (0, 1, 3, 5, 6, 8, 9, 11, 12, 14, 15, 17, 18, 20, 21, 23, 25, 26),
     (4, 7, 10, 11, 13, 15, 16, 19, 22),
     (2, 3, 5, 6, 8, 9, 10, 16, 17, 18, 20, 21, 23, 24),
     (0, 2, 3, 5, 6, 8, 11, 12, 14, 15, 18, 20, 21, 23, 24, 26),
     (1, 4, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 22, 25),
     (0, 2, 3, 5, 6, 7, 8, 11, 12, 14, 15, 18, 19, 20, 21, 23, 24, 26),
     (2, 3, 5, 7, 9, 10, 16, 17, 19, 21, 23, 24),
     (4, 5, 7, 9, 10, 11, 13, 15, 16, 17, 19, 21, 22),
     (0, 1, 3, 4, 6, 7, 8, 10, 11, 12, 14, 15, 16, 18, 19, 20, 22, 23, 25, 26),
     (0, 1, 2, 3, 6, 7, 8, 11, 12, 14, 15, 18, 19, 20, 23, 24, 25, 26),
     (1, 4, 7, 10, 13, 16, 19, 22, 25),
     (0, 1, 2, 3, 6, 7, 8, 11, 12, 14, 15, 18, 19, 20, 23, 24, 25, 26),
     (0, 1, 3, 4, 6, 7, 8, 10, 11, 12, 14, 15, 16, 18, 19, 20, 22, 23, 25, 26),
     (4, 5, 7, 9, 10, 11, 13, 15, 16, 17, 19, 21, 22),
     (2, 3, 5, 7, 9, 10, 16, 17, 19, 21, 23, 24),
     (0, 2, 3, 5, 6, 7, 8, 11, 12, 14, 15, 18, 19, 20, 21, 23, 24, 26),
     (1, 4, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 22, 25),
     (0, 2, 3, 5, 6, 8, 11, 12, 14, 15, 18, 20, 21, 23, 24, 26),
     (2, 3, 5, 6, 8, 9, 10, 16, 17, 18, 20, 21, 23, 24),
     (4, 7, 10, 11, 13, 15, 16, 19, 22),
     (0, 1, 3, 5, 6, 8, 9, 11, 12, 14, 15, 17, 18, 20, 21, 23, 25, 26),
     (0, 1, 2, 5, 6, 8, 9, 12, 14, 17, 18, 20, 21, 24, 25, 26),
     (1, 2, 3, 7, 11, 12, 13, 14, 15, 19, 23, 24, 25),
     (0, 2, 3, 6, 8, 11, 12, 14, 15, 18, 20, 23, 24, 26),
  ),
  28: (  # 步数=416
     (0, 2, 3, 5, 7, 10, 13, 14, 17, 20, 22, 24, 25, 27),
     (1, 2, 3, 4, 6, 13, 14, 21, 23, 24, 25, 26),
     (0, 1, 2, 3, 4, 7, 8, 9, 11, 16, 18, 19, 20, 23, 24, 25, 26, 27),
     (0, 1, 2, 3, 6, 7, 9, 10, 17, 18, 20, 21, 24, 25, 26, 27),
     (1, 2, 4, 6, 10, 11, 12, 13, 14, 15, 16, 17, 21, 23, 25, 26),
     (0, 5, 6, 7, 8, 9, 18, 19, 20, 21, 22, 27),
     (1, 3, 4, 5, 6, 9, 10, 17, 18, 21, 22, 23, 24, 26),
     (0, 2, 3, 5, 7, 8, 10, 12, 13, 14, 15, 17, 19, 20, 22, 24, 25, 27),
     (2, 5, 7, 8, 10, 11, 12, 15, 16, 17, 19, 20, 22, 25),
     (2, 3, 5, 6, 9, 13, 14, 18, 21, 22, 24, 25),
     (0, 3, 4, 6, 7, 8, 10, 12, 13, 14, 15, 17, 19, 20, 21, 23, 24, 27),
     (2, 4, 8, 11, 12, 13, 14, 15, 16, 19, 23, 25),
     (4, 7, 8, 10, 11, 12, 13, 14, 15, 16, 17, 19, 20, 23),
     (0, 1, 4, 7, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 20, 23, 26, 27),
     (0, 1, 4, 7, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 20, 23, 26, 27),
     (4, 7, 8, 10, 11, 12, 13, 14, 15, 16, 17, 19, 20, 23),
     (2, 4, 8, 11, 12, 13, 14, 15, 16, 19, 23, 25),
     (0, 3, 4, 6, 7, 8, 10, 12, 13, 14, 15, 17, 19, 20, 21, 23, 24, 27),
     (2, 3, 5, 6, 9, 13, 14, 18, 21, 22, 24, 25),
     (2, 5, 7, 8, 10, 11, 12, 15, 16, 17, 19, 20, 22, 25),
     (0, 2, 3, 5, 7, 8, 10, 12, 13, 14, 15, 17, 19, 20, 22, 24, 25, 27),
     (1, 3, 4, 5, 6, 9, 10, 17, 18, 21, 22, 23, 24, 26),
     (0, 5, 6, 7, 8, 9, 18, 19, 20, 21, 22, 27),
     (1, 2, 4, 6, 10, 11, 12, 13, 14, 15, 16, 17, 21, 23, 25, 26),
     (0, 1, 2, 3, 6, 7, 9, 10, 17, 18, 20, 21, 24, 25, 26, 27),
     (0, 1, 2, 3, 4, 7, 8, 9, 11, 16, 18, 19, 20, 23, 24, 25, 26, 27),
     (1, 2, 3, 4, 6, 13, 14, 21, 23, 24, 25, 26),
     (0, 2, 3, 5, 7, 10, 13, 14, 17, 20, 22, 24, 25, 27),
  ),
  29: (  # 步数=393
     (2, 3, 8, 9, 10, 11, 15, 16, 20, 22, 24, 26, 28),
     (0, 2, 3, 5, 6, 8, 11, 13, 15, 16, 18, 21, 23, 25, 27),
     (1, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 17, 20, 28),
     (0, 2, 3, 4, 5, 6, 8, 11, 12, 15, 16, 18, 21, 22, 24, 26, 27),
     (2, 4, 5, 8, 9, 10, 14, 15, 16, 20, 21, 22, 23, 25, 26, 27, 28),
     (2, 6, 10, 11, 14, 15, 20, 21, 22, 23, 25, 26, 27, 28),
     (0, 2, 5, 9, 11, 16, 17, 18, 21, 22, 24, 26, 27),
     (1, 2, 6, 7, 11, 13, 15, 16, 18, 20, 28),
     (0, 1, 4, 5, 6, 7, 11, 12, 14, 15, 18, 19, 21, 23, 25, 27),
     (0, 2, 4, 6, 9, 12, 14, 16, 19, 22, 24, 26, 28),
     (0, 3, 4, 6, 7, 11, 12, 13, 14, 18, 19, 21),
     (0, 2, 3, 5, 7, 11, 12, 18, 20, 22, 23, 25, 27),
     (0, 1, 2, 7, 9, 13, 15, 16, 18, 22, 23, 24, 26),
     (3, 4, 7, 8, 12, 14, 15, 16, 17, 18, 23, 24, 27, 28),
     (2, 3, 4, 8, 9, 10, 14, 15, 16, 20, 21, 22, 26, 27, 28),
     (0, 2, 3, 6, 7, 10, 15, 17, 20, 22, 23, 26, 27),
     (1, 4, 6, 7, 8, 9, 10, 12, 13, 14, 15, 20, 23, 28),
     (0, 2, 3, 5, 7, 11, 12, 18, 20, 22, 23, 25, 27),
     (2, 3, 7, 8, 10, 11, 13, 16, 19, 20, 21, 22, 24, 26, 28),
     (8, 9, 10, 18, 19, 20),
     (0, 1, 4, 5, 6, 7, 11, 12, 14, 15, 18, 19, 21, 23, 25, 27),
     (0, 1, 4, 7, 8, 10, 11, 12, 13, 14, 15, 22, 24, 26),
     (4, 5, 6, 8, 9, 10, 11, 12, 14, 17, 20, 21, 27, 28),
     (2, 6, 10, 11, 14, 15, 20, 21, 22, 23, 25, 26, 27, 28),
     (0, 5, 6, 9, 12, 15, 18, 21, 23, 24, 25, 27),
     (3, 5, 10, 11, 14, 15, 20, 21, 27, 28),
     (1, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 17, 20, 28),
     (3, 4, 5, 10, 11, 12, 13, 14, 15, 20, 21, 22, 23, 24, 25, 26, 27, 28),
     (0, 3, 4, 6, 9, 11, 12, 14, 15, 18),
  ),
  30: (  # 步数=456
     (1, 2, 3, 4, 5, 6, 10, 11, 18, 19, 21, 22, 24, 28, 29),
     (1, 6, 8, 10, 11, 13, 14, 15, 16, 18, 19, 20, 21, 22, 23, 26, 28, 29),
     (1, 2, 5, 6, 7, 9, 12, 13, 16, 17, 19, 21, 22, 23, 24, 27),
     (2, 5, 6, 7, 10, 11, 12, 14, 15, 17, 19, 22, 23, 24, 26, 28),
     (0, 1, 2, 6, 9, 10, 14, 15, 17, 18, 19, 21, 23, 25),
     (0, 4, 5, 6, 7, 9, 11, 16, 20, 23, 26, 27, 29),
     (0, 1, 4, 6, 7, 8, 9, 13, 15, 17, 19, 21, 23, 25, 26, 27, 28),
     (1, 4, 7, 14, 18, 22, 23, 24, 25, 26, 27, 28, 29),
     (0, 1, 4, 6, 7, 8, 10, 11, 12, 13, 15, 16, 17, 19, 20, 21, 22, 23, 25, 26, 27, 28, 29),
     (0, 4, 5, 6, 7, 8, 9, 10, 13, 15, 17, 19, 22, 26, 27, 28),
     (0, 1, 2, 6, 7, 8, 11, 12, 13, 14, 15, 17, 18, 19, 20, 21, 22, 23, 24, 25, 27, 29),
     (2, 5, 7, 9, 10, 11, 13, 16, 19, 22, 25, 27),
     (1, 2, 7, 9, 13, 14, 15, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27),
     (1, 4, 7, 8, 9, 10, 15, 17, 19, 22, 25, 29),
     (1, 2, 9, 10, 12, 14, 15, 16, 17, 19, 20, 21, 22, 23, 24, 25, 26),
     (2, 5, 6, 8, 11, 13, 14, 15, 18, 22, 25, 26, 28),
     (0, 1, 2, 5, 6, 7, 9, 10, 13, 14, 16, 17, 19, 21, 22, 23, 24, 27),
     (0, 6, 7, 9, 10, 11, 16, 17, 20, 21, 22, 24, 25, 26, 28, 29),
     (0, 1, 3, 4, 5, 8, 10, 11, 19, 20, 21, 26, 28, 29),
     (1, 2, 3, 5, 6, 7, 13, 14, 15, 19, 20, 22, 23, 25, 26, 27),
     (0, 7, 8, 9, 13, 15, 17, 22, 23, 24, 25, 26, 27, 28),
     (1, 4, 6, 9, 11, 13, 15, 16, 23, 25, 26, 27, 28),
     (0, 5, 7, 8, 9, 10, 12, 13, 14, 16, 17, 18, 19, 20, 21, 22, 23, 26, 27),
     (1, 2, 3, 4, 7, 9, 10, 12, 13, 14, 25, 28, 29),
     (0, 1, 4, 5, 7, 11, 13, 26, 27, 28, 29),
     (0, 2, 3, 5, 6, 7, 10, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 28),
     (0, 2, 3, 11, 28, 29),
     (0, 1, 8, 9, 10, 29),
     (1, 2, 4, 5, 6, 8, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29),
     (0, 2, 3, 4, 6, 7, 8),
  ),
  31: (  # 步数=553
     (0, 1, 3, 5, 6, 7, 9, 12, 13, 15, 17, 18, 21, 23, 24, 25, 27, 29, 30),
     (0, 1, 2, 4, 5, 7, 8, 12, 13, 14, 16, 17, 18, 22, 23, 25, 26, 28, 29, 30),
     (1, 2, 4, 8, 9, 10, 13, 14, 16, 17, 20, 21, 22, 26, 28, 29),
     (0, 3, 4, 5, 6, 7, 10, 12, 15, 18, 20, 23, 24, 25, 26, 27, 30),
     (1, 2, 3, 4, 7, 8, 9, 10, 11, 13, 14, 16, 17, 19, 20, 21, 22, 23, 26, 27, 28, 29),
     (0, 1, 3, 5, 6, 10, 11, 13, 14, 16, 17, 19, 20, 24, 25, 27, 29, 30),
     (0, 3, 5, 6, 7, 9, 12, 15, 18, 21, 23, 24, 25, 27, 30),
     (0, 1, 3, 4, 6, 7, 8, 10, 11, 13, 14, 16, 17, 19, 20, 22, 23, 24, 26, 27, 29, 30),
     (1, 2, 4, 7, 8, 10, 11, 13, 14, 16, 17, 19, 20, 22, 23, 26, 28, 29),
     (0, 2, 4, 6, 9, 12, 15, 18, 21, 24, 26, 28, 30),
     (2, 3, 4, 5, 7, 8, 10, 11, 13, 14, 16, 17, 19, 20, 22, 23, 25, 26, 27, 28),
     (4, 5, 7, 8, 10, 11, 13, 14, 16, 17, 19, 20, 22, 23, 25, 26),
     (0, 1, 3, 6, 9, 12, 15, 18, 21, 24, 27, 29, 30),
     (0, 1, 2, 4, 5, 7, 8, 10, 11, 13, 14, 16, 17, 19, 20, 22, 23, 25, 26, 28, 29, 30),
     (1, 2, 4, 5, 7, 8, 10, 11, 13, 14, 16, 17, 19, 20, 22, 23, 25, 26, 28, 29),
     (0, 3, 6, 9, 12, 15, 18, 21, 24, 27, 30),
     (1, 2, 4, 5, 7, 8, 10, 11, 13, 14, 16, 17, 19, 20, 22, 23, 25, 26, 28, 29),
     (0, 1, 2, 4, 5, 7, 8, 10, 11, 13, 14, 16, 17, 19, 20, 22, 23, 25, 26, 28, 29, 30),
     (0, 1, 3, 6, 9, 12, 15, 18, 21, 24, 27, 29, 30),
     (4, 5, 7, 8, 10, 11, 13, 14, 16, 17, 19, 20, 22, 23, 25, 26),
     (2, 3, 4, 5, 7, 8, 10, 11, 13, 14, 16, 17, 19, 20, 22, 23, 25, 26, 27, 28),
     (0, 2, 4, 6, 9, 12, 15, 18, 21, 24, 26, 28, 30),
     (1, 2, 4, 7, 8, 10, 11, 13, 14, 16, 17, 19, 20, 22, 23, 26, 28, 29),
     (0, 1, 3, 4, 6, 7, 8, 10, 11, 13, 14, 16, 17, 19, 20, 22, 23, 24, 26, 27, 29, 30),
     (0, 3, 5, 6, 7, 9, 12, 15, 18, 21, 23, 24, 25, 27, 30),
     (0, 1, 3, 5, 6, 10, 11, 13, 14, 16, 17, 19, 20, 24, 25, 27, 29, 30),
     (1, 2, 3, 4, 7, 8, 9, 10, 11, 13, 14, 16, 17, 19, 20, 21, 22, 23, 26, 27, 28, 29),
     (0, 3, 4, 5, 6, 7, 10, 12, 15, 18, 20, 23, 24, 25, 26, 27, 30),
     (1, 2, 4, 8, 9, 10, 13, 14, 16, 17, 20, 21, 22, 26, 28, 29),
     (0, 1, 2, 4, 5, 7, 8, 12, 13, 14, 16, 17, 18, 22, 23, 25, 26, 28, 29, 30),
     (0, 1, 3, 5, 6, 7, 9, 12, 13, 15, 17, 18, 21, 23, 24, 25, 27, 29, 30),
  ),
  32: (  # 步数=492
     (0, 2, 3, 4, 6, 8, 9, 12, 13, 15, 16, 18, 19, 23, 27, 29),
     (1, 2, 4, 5, 7, 8, 9, 12, 13, 14, 15, 16, 17, 18, 19, 21, 25, 28, 31),
     (0, 1, 5, 7, 8, 13, 15, 16, 18, 20, 27, 29),
     (0, 2, 3, 4, 5, 6, 9, 10, 11, 12, 13, 18, 21, 22, 23, 24),
     (0, 2, 5, 6, 7, 8, 9, 18, 20, 21, 24, 26, 28, 30, 31),
     (0, 1, 2, 3, 4, 6, 10, 14, 15, 16, 18, 19, 20, 22, 23, 24, 25, 27, 29, 30, 31),
     (2, 4, 6, 7, 9, 12, 14, 16, 17, 22, 24, 25, 29, 30),
     (1, 2, 4, 5, 7, 8, 10, 13, 14, 17, 18, 22, 31),
     (1, 3, 5, 8, 12, 13, 16, 18, 20, 22, 26, 27, 28, 30),
     (1, 5, 7, 8, 12, 14, 18, 19, 21, 22, 24, 26, 28, 29, 31),
     (1, 5, 6, 7, 10, 12, 19, 21, 23, 25, 26, 29),
     (1, 3, 8, 11, 12, 15, 16, 17, 18, 19, 20, 21, 25, 28, 29),
     (1, 2, 7, 10, 11, 15, 19, 25, 26, 28, 31),
     (2, 3, 4, 5, 8, 10, 12, 13, 15, 16, 18, 19, 20, 22, 23, 26, 27, 28, 29),
     (0, 1, 5, 7, 9, 10, 12, 13, 14, 16, 17, 18, 19, 20, 21, 22, 23, 25, 28, 29),
     (0, 1, 2, 4, 5, 6, 9, 11, 13, 14, 18, 19, 20, 22, 24, 26, 27, 31),
     (1, 2, 3, 4, 5, 6, 7, 9, 17, 19, 22, 26, 27, 28),
     (0, 2, 4, 5, 6, 7, 8, 9, 12, 15, 19, 20, 22, 27, 28, 30),
     (2, 5, 6, 7, 20, 21, 22, 24, 25, 26, 29),
     (2, 4, 6, 8, 10, 11, 13, 14, 16, 17, 18, 19, 23, 24, 26, 27, 28, 30, 31),
     (0, 2, 3, 6, 9, 10, 11, 12, 13, 14, 15, 16, 19, 20, 22, 23, 28, 30, 31),
     (1, 3, 4, 6, 8, 9, 10, 11, 13, 14, 17, 18, 20, 21, 22, 24, 25, 27, 28, 29),
     (0, 4, 5, 6, 7, 8, 9, 10, 15, 16, 17, 18, 24, 25, 26, 27, 28, 29, 30),
     (1, 2, 3, 6, 8, 9, 11, 12, 14, 15, 17, 25, 27, 28, 29, 30),
     (0, 1, 3, 4, 5, 6, 11, 12, 13, 14, 17, 18, 19, 20, 21, 22, 23, 24, 25, 28, 29),
     (0, 12, 15, 27, 30, 31),
     (0, 1, 2, 7, 8, 9, 10, 11, 12, 13, 14, 28, 29, 30, 31),
     (2, 4, 5, 7, 12, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 30),
     (1, 2, 3, 4, 5, 6, 7, 8, 11, 12, 30, 31),
     (1, 2, 4, 5, 7, 8, 11, 31),
     (11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31),
     (0, 3, 6, 9),
  ),
}
# fmt: on


def harvest_weird(w, h):
    if w != h or w < 1 or w > 32:
        print("需要正方形区域")
        return

    def collect_weird():
        harvest()

    def affect_world():
        toggle_table = solutions[w]
        for r in range(h):
            for c in toggle_table[r]:
                move_2d_torus((r, c))
                use_item(Items.Weird_Substance)

    affect_world()
    traverse_rectangle(collect_weird, w, h)


if __name__ == "__main__":
    clear()
    while True:
        harvest_weird(WORLD_SIZE, WORLD_SIZE)


# 这些需要在 Python 中计算
# def solve_lights_out_gauss(N):
#     # 从存有 0 和 1 的二维数组 board 中计算出需要执行异或操作的坐标
#     # 算法复杂度太高，预先计算，实际执行靠打表
#     # 在 N x N 网格上：
#     # - 初始状态：全部为 0
#     # - 目标状态：全部为 1
#     # - 操作规则：翻转当前位置及其上下左右

#     # 返回值：
#     # - 一个坐标列表 [(r, c), ...]，表示这些位置各执行一次操作
#     # - 如果无解，返回 None

#     num_vars = N * N

#     # --- 1. 构建增广矩阵 (Augmented Matrix) ---
#     # matrix[i] 代表第 i 个方程，对应网格第 i 个格子的状态变化
#     # 大小: num_vars 行, num_vars + 1 列
#     matrix = []

#     # 将二维坐标映射为一维变量编号
#     def index(row, col):
#         return row * N + col

#     for r in range(N):
#         for c in range(N):
#             row = [0] * (num_vars + 1)
#             idx = index(r, c)

#             # 设置目标值 (最后一列)，我们需要从 0 变 1，所以必须翻转奇数次，目标为 1
#             row[num_vars] = 1

#             # 确定哪些按钮会影响当前格子 (r, c)
#             # 也就是：按下按钮 j，是否会翻转格子 i？
#             # 逻辑是对称的：按下 (r, c) 也会翻转它自己和邻居

#             # 影响自己
#             row[idx] = 1

#             # 影响邻居
#             for dr, dc in [(-1, 0), (1, 0), (0, -1), (0, 1)]:
#                 nr, nc = r + dr, c + dc
#                 if 0 <= nr < N and 0 <= nc < N:
#                     n_idx = index(nr, nc)
#                     row[n_idx] = 1

#             matrix.append(row)

#     # --- 2. 高斯-若尔当消元 (Gauss-Jordan Elimination) ---
#     pivot_row = 0
#     # cols 记录每一列的主元在哪一行，用于最后提取解
#     col_to_pivot_row = [-1] * num_vars

#     for col in range(num_vars):
#         if pivot_row >= num_vars:
#             break

#         # a. 寻找主元 (在当前列中，从 pivot_row 开始往下找第一个为 1 的行)
#         pivot = -1
#         for r in range(pivot_row, num_vars):
#             if matrix[r][col] == 1:
#                 pivot = r
#                 break

#         if pivot == -1:
#             continue  # 这一列全是 0，说明是自由变量，跳过

#         # b. 交换行 (把找到的主元行换到当前的 pivot_row 位置)
#         matrix[pivot_row], matrix[pivot] = matrix[pivot], matrix[pivot_row]

#         # 记录这一列的主元行
#         col_to_pivot_row[col] = pivot_row

#         # c. 消元 (用这一行去异或 所有其他行，包括上面和下面的)
#         # 目的是把这一列除了 pivot_row 以外的位置全变成 0
#         for r in range(num_vars):
#             if r != pivot_row and matrix[r][col] == 1:
#                 # 异或操作：row[r] = row[r] XOR row[pivot_row]
#                 # 优化：只需要从 col 位置开始异或，前面的肯定都是 0 了
#                 for k in range(col, num_vars + 1):
#                     matrix[r][k] ^= matrix[pivot_row][k]

#         pivot_row += 1

#     # --- 3. 检查无解情况 ---
#     # 如果出现 [0, 0, ..., 0, 1] 的行，说明 0 = 1，无解
#     for r in range(pivot_row, num_vars):
#         if matrix[r][num_vars] == 1:
#             return None  # 无解

#     # --- 4. 提取解 ---
#     solution_coords = []
#     for col in range(num_vars):
#         row_idx = col_to_pivot_row[col]
#         if row_idx != -1:
#             # 如果这一列有主元，它的值就是增广矩阵最后一列的值
#             val = matrix[row_idx][num_vars]
#             if val == 1:
#                 solution_coords.append((col // N, col % N))
#         else:
#             # 自由变量，默认设为 0 (即不按)，所以不需要加入 solution_coords
#             pass

#     return solution_coords


# def hardcode_lights_out_solutions(start, until):
#     print("solutions = {")
#     for n in range(start, until + 1):
#         res = solve_lights_out_gauss(n)
#         if res is None:
#             print(f"  {n}: None,  # 无解")
#         else:
#             compressed = compress_coords(res)
#             print(f"  {n}: (  # 步数={len(res)}")
#             for x, ys in enumerate(compressed):
#                 if ys:
#                     ys_str = ", ".join(str(y) for y in ys)
#                     print(f"     ({ys_str},),")
#             print(f"  ),")
#     print("}")


# def compress_coords(coords):
#     # 将坐标列表压缩为按行存储的形式
#     max_x = max(x for x, y in coords)
#     temp = [[] for _ in range(max_x + 1)]
#     for x, y in coords:
#         temp[x].append(y)
#     return temp
